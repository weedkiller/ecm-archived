///*
// * jQuery dateDropDowns
// *
// * url		http://www.amdonnelly.co.uk/jquery/date-drop-down-lists
// * author	Alan Donnelly 2011
// * version	1.0.1
// * license	MIT and GPL licenses
// */
//(function (a) {

//    a.fn.dateDropDowns = function (k) {
//        var g = {
//            dateFormat: "mm-dd-yy",
//            monthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
//            yearStart: "1979", yearEnd: "2011"
//        },
//        k = a.extend(g, k);
//        return this.each(function () {
//            function l() {
//                //alert("test8");
//                var c = d.getMonth(), p = "", f = 0, title = "";

//                _daysInMonth = m(c, d.getFullYear()) + 1;
//                var dayselect = $("#" + e + "_list").val();
//                a("#" + e + "_list").children().length < _daysInMonth ? f = a("#" + e + "_list").children().length + 1 : a("#" + e + "_list").children().remove();
//                //alert(e);
//                for (_x = 0; _x < _daysInMonth; _x++) {
//                    if (_x == 0) {
//                        c = (dayselect == null || dayselect == "" || dayselect == 0) ? "selected='true'" : "";
//                        title = "[Days]";
//                        p += "<option value='" + _x + "' " + c + ">" + title + "</option>"
//                    } else {
//                        c = d.getDate() == _x ? "selected='true'" : "";

//                        //c = ((dayselect != null || dayselect != "") && (_x == dayselect)) ? "selected='true'" : "";
//                        title = _x;
//                        p += "<option value='" + _x + "' " + c + ">" + title + "</option>"
//                    }

//                    //c = _x == 0 ? "selected='true'" : "",  p += "<option value='" + _x + "' " + c + ">" + title + "</option>";
//                }
//                //a("#" + e + "_list").append("<option value='0'>[Days]</option>")
//                a("#" + e + "_list").append(p)


//            } function m(c, a) {
//                //alert("test7");
//                var d = 31; c == 4 || c == 6 || c == 9 || c == 11 ? d = 30 : c == 2 && (d = a % 4 == 0 ? 29 : 28);
//                return d
//            } function n() {

//                var c = d.getDate(), a = d.getMonth() + 1, f = d.getFullYear(), b = g.dateFormat;
//                b.indexOf("DD") > -1 && c.toString().length < 2 && (c = "0" + c);
//                b.indexOf("MM") > -1 && a.toString().length < 2 && (a = "0" + a);
//                b = g.dateFormat.toLowerCase(); b = b.replace("dd", c); b = b.replace("mm", a);
//                b = b.replace("yy", f);
//                //b = b.toString().split('-').join('/');
//                j.val(b);

//            } var j = a(this);j.html();

//            var b = j.attr("id") + "_dateLists", e = b + "_day", h = b + "_month", i = b + "_year", k = j.val(), d = new Date, o = g.dateFormat.indexOf("/") > -1 ? "/" : "-";

//            (function () {
//                //step 1
//                //alert("test5");

//                if (k.length > 0) {
//                    var a = g.dateFormat.split(o), b = k.split(o), f = new Date;
//                    for (_x = 0; _x < b.length; _x++) a[_x].toLowerCase().indexOf("d") > -1 ? f.setDate(b[_x]) : a[_x].toLowerCase().indexOf("m") > -1 ? f.setMonth(b[_x] - 1) : a[_x].toLowerCase().indexOf("y") > -1 && f.setYear(b[_x]); d = f
//                }
//            })();
//            (function () {

//                var c = g.dateFormat.split(o), d = j; j.replaceWith("<div id='" + b + "' class='dateLists_container'></div>");

//                for (_x = 0; _x < c.length; _x++) c[_x].toLowerCase().indexOf("d") > -1 ? (a("#" + b).append("<div id='" + e + "' class='day_container'>"),
//                a("#" + e).append("<select id='" + e + "_list' name='" + e + "_list' class='list'></select>"),
//                a("#" + b).append("</div>")) : c[_x].toLowerCase().indexOf("m") > -1 ? (a("#" + b).append("<div id='" + h + "' class='month_container'>"),
//                a("#" + h).append("<select id='" + h + "_list' name='" + h + "_list' class='list'></select>"),
//                a("#" + b).append("</div>")) : c[_x].toLowerCase().indexOf("y") > -1 && (a("#" + b).append("<div id='" + i + "' class='year_container'>"),
//                a("#" + i).append("<select id='" + i + "_list' name='" + i + "_list' class='list'></select>"), a("#" + b).append("</div>"));
//                a("#" + b).append(d); j.hide()
//            })(); l();
//            (function () {
//                //alert("test3");
//                a("#" + h + "_list").children().remove();
//                a("#" + h + "_list").append("<option value='0' selected='true'>[Month]</option>");

//                for (_x = 0; _x < 12; _x++) {
//                    //var c = d.getMonth() == _x ? "selected='true'" : "";
//                    var c = d.getMonth() == _x ? "selected='true'" : ""
//                    a("#" + h + "_list").append("<option value='" + (_x+1) + "' " + c + ">" + g.monthNames[_x] + "</option>")
//                }
//            })();
//            (function () {
//                //alert("test2");
//                a("#" + i + "_list").children().remove();
//                a("#" + i + "_list").append("<option value='0' selected='true'>[Years]</option>");

//                for (_x = parseInt(g.yearStart) ;
//                _x < parseInt(g.yearEnd) + 1; _x++) {
//                    //var c = d.getFullYear() == _x ? "selected='true'" : "";
//                    var c = d.getFullYear() == _x ? "selected='true'" : "";
//                    a("#" + i + "_list").append("<option value='" + _x + "' " + c + ">" + _x + "</option>")
//                }
//            })();
//            (function () {
//                //alert("test1");
//                a("#" + e + "_list").change(function () { d.setDate(a("#" + e + "_list").val()); n() });
//                a("#" + h + "_list").change(function () {
//                    var c = parseInt(a("#" + h + "_list").val()), b = d.getDate();
//                    _daysInMonth = m(c + 1, d.getFullYear());
//                    b > _daysInMonth && (b = _daysInMonth);
//                    d = new Date(d.getFullYear(), c, b, 0, 0, 0, 0);
//                    l(); n();
//                });
//                a("#" + i + "_list").change(function () {; var b = a("#" + i + "_list").val(), e = d.getDate(), f = d.getMonth();
//                    _daysInMonth = m(f + 1, b); e > _daysInMonth && (e = _daysInMonth); d = new Date(b, f, e, 0, 0, 0, 0);
//                    l(); n();
//                });
//            })()
//        })
//    }
//})(jQuery);

/*
 * jQuery dateDropDowns
 *
 * url		http://www.amdonnelly.co.uk/jquery/date-drop-down-lists
 * author	Alan Donnelly 2011
 * version	1.0.1
 * license	MIT and GPL licenses
 */
(function (a) {

    a.fn.dateDropDowns = function (k) {
        var checkdateformat = true;
        var checkfeb = true;
        var g = {
            dateFormat: "mm-dd-yy",
            monthNames: ["[Month]", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            yearStart: "1979", yearEnd: "2011"
        },
        k = a.extend(g, k);
        return this.each(function () {
           
            var j = a(this); j.html();

            var b = j.attr("id") + "_dateLists",
                dayname = b + "_day",//e
                monthname = b + "_month",//h
                yearname = b + "_year",//i
                getDatemodel = j.val(),
                d = new Date,
                o = g.dateFormat.indexOf("/") > -1 ? "/" : "-";
            
            var month_number = 0;
            var year_number = 0;
            var day_number = 0;

            var delay ;

            (function () {
                var c = g.dateFormat.split(o),
                    d = j;
                j.replaceWith("<div id='" + b + "' class='dateLists_container'></div>");

                for (_x = 0; _x < c.length; _x++) {
                    c[_x].toLowerCase().indexOf("d") > -1 ? ($("#" + b).append("<div id='" + dayname + "' class='day_container'>"),
                    $("#" + dayname).append("<select id='" + dayname + "_list' name='" + dayname + "_list' class='date_list'></select>"),
                    $("#" + b).append("</div>")) : c[_x].toLowerCase().indexOf("m") > -1 ? ($("#" + b).append("<div id='" + monthname + "' class='month_container'>"),
                    $("#" + monthname).append("<select id='" + monthname + "_list' name='" + monthname + "_list' class='month_list'></select>"),
                    $("#" + b).append("</div>")) : c[_x].toLowerCase().indexOf("y") > -1 && ($("#" + b).append("<div id='" + yearname + "' class='year_container'>"),
                    $("#" + yearname).append("<select id='" + yearname + "_list' name='" + yearname + "_list' class='year_list'></select>"), $("#" + b).append("</div>"));
                    $("#" + b).append(d); j.hide()
                }
            })();


            function GetvalueFrommodel()
            {
                
                if (getDatemodel.length > 0) {
                    var datesplite = g.dateFormat.split(o);

                    var datadatevalue = getDatemodel.split(o);

                    month_number = datadatevalue[0];
                    day_number = datadatevalue[1];
                    year_number = datadatevalue[2];
                }
            }


            GetvalueFrommodel();
            DisplayDay();
            DisplayMonth();
            DisplayYears();

            
            function DisplayDay()
            {
                // alert("o");
                var c = d.getMonth(),
                    p = "",
                    f = 1,
                    title = "";

                    
                var selecetd = "selected='true'";
                var nonselected = "";
                //alert(year_number);
                year_number = (year_number == 0) ? (d.getFullYear) : year_number;

                _daysInMonth = CalculateDayInMonth(month_number, year_number) + 1;
 
                //alert(day_number + " inm:" + _daysInMonth);
                if (day_number > _daysInMonth) {
                    day_number = 0;
                } 
                
               

                if ($("#" + dayname + "_list").children().length < _daysInMonth)
                {
                    f = $("#" + dayname + "_list").children().length + 1
                }
                else
                {
                    $("#" + dayname + "_list").children().remove()
                }
                //alert(_daysInMonth);
                for (var day = 0 ; day < _daysInMonth; day++) {
                    
                    var selectNonorNot = (day == 0) ? "[Day]" : day;

                    if (day == day_number) {
                        p += "<option value='" + day + "' " + selecetd + ">" + selectNonorNot + "</option>";
                        
                    } else {
                        p += "<option value='" + day + "' " + nonselected + ">" + selectNonorNot + "</option>";
                        
                    }
                    //if (day == 0)
                    //{
                    //    p += "<option value='" + day + "' " + selecetd + ">" + "[Day]" + "</option>";
                    //}
                    //else
                    //{
                    //    p += "<option value='" + day + "' " + nonselected + ">" + day + "</option>";
                    //}
                    
                }
                $("#" + dayname + "_list").html("");
                $("#" + dayname + "_list").append(p);
                //$("#" + dayname + "_list").html("");
                //$("#" + dayname + "_list").append('<option value="">Loading</option>');
                
                //setTimeout(function () {
                //    // alert("haha");
                //    $("#" + dayname + "_list").html("");
                //    $("#" + dayname + "_list").append(p)
                //}, delay);
            }//end DisplayDay

            function DisplayMonth()
            {
                var month_list = "";
                var monthnonselected = "";
                var monthselected = "selected='true'";

                //remove all list
                $("#" + monthname + "_list").children().remove();
                
               
                for (var monthcount = 0; monthcount < 13; monthcount++) {
                    
                    if (monthcount == month_number) {
                        month_list += "<option value='" + monthcount + "' " + monthselected + ">" + g.monthNames[monthcount] + "</option>";
                    } else {
                        month_list += "<option value='" + monthcount + "' " + monthnonselected + ">" + g.monthNames[monthcount] + "</option>";
                    }
                    
                    
                }
                $("#" + monthname + "_list").append(month_list);
               

            }//end DisplayMonth


            function DisplayYears()
            {
                var year_list = "";
                var selected = "selected='true'";
                var nonselected = "";
                //remove list years
                $("#" + yearname + "_list").children().remove();

                year_list = "<option value='" + 0 + "' " + selected + ">" + "[Years]" + "</option>";
                for (var yearcount = parseInt(g.yearEnd) ; yearcount >= parseInt(g.yearStart) ; yearcount--) {
                    if (yearcount == year_number) {
                        year_list += "<option value='" + yearcount + "' " + selected + ">" + yearcount + "</option>";
                    }
                    else {
                        year_list += "<option value='" + yearcount + "' " + nonselected + ">" + yearcount + "</option>";
                    }
                    
                }

                $("#" + yearname + "_list").append(year_list);

            }


            function CalculateDayInMonth(month_number, a) {
                //alert(a);

                var d = 31; month_number == 4 || month_number == 6 || month_number == 9 || month_number == 11 ? d = 30 : month_number == 2 && (d = a % 4 == 0 ? 29 : 28);
                
                return d;
            }


            
            function SetValueInput() {
                var dateformat = g.dateFormat;

                var monthdate = $("#" + monthname + "_list").val(),
                    daydate = $("#" + dayname + "_list").val(),
                    yearsdate = $("#" + yearname + "_list").val();

                    dateformat = g.dateFormat.toLowerCase();

                    if (monthdate != 0 && daydate != 0 && yearsdate != 0)
                    {
                        //alert(monthdate + " " + daydate + " " + yearsdate);

                        monthdate.toString().length < 2 && (monthdate = "0" + monthdate);
                        daydate.toString().length < 2 && (daydate = "0" + daydate);

                        dateformat = dateformat.replace("dd", daydate);
                        dateformat = dateformat.replace("mm", monthdate);
                        dateformat = dateformat.replace("yy", yearsdate);
                        
                        j.val(dateformat);

                    }
                    else
                    {
                        j.val("");
                    }

                   
            }




            (function () {

                $("#" + dayname + "_list").change(function () {
                    var daynamesetvalue = $("#" + dayname + "_list").val()
                   
                    day_number = daynamesetvalue;

                    delay = 5;

                    DisplayDay();
                    DisplayMonth();
                    DisplayYears();
                    SetValueInput();
                });

                $("#" + monthname + "_list").change(function () {
                   // alert("ok");
                    var monthselectvalue = parseInt(a("#" + monthname + "_list").val()),
                        monthnow = d.getDate();

                        month_number = monthselectvalue;

                        delay = 1000;

                        DisplayDay();
                        DisplayMonth();
                        DisplayYears();
                        SetValueInput();

                });

                $("#" + yearname + "_list").change(function () {
                    var yearselectvalue = $("#" + yearname + "_list").val()

                    year_number = yearselectvalue;

                    //alert(year_number);
                    delay = 1000;

                    DisplayDay();
                    DisplayMonth();
                    DisplayYears();
                    SetValueInput();
                    //alert(yearselectvalue);
                });

            })();
        })
    }
})(jQuery);